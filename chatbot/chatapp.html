<!DOCTYPE html>
<html>
<head>
    <title>chatapp</title>
</head>
<body>
<div class="js-container"></div>

<script src="https://unpkg.com/supersimpledev/react.js"></script>
<script src="https://unpkg.com/supersimpledev/react-dom.js"></script>

<script src="https://unpkg.com/supersimpledev/babel.js"></script>
<script type="text/babel">

    const ChatMessages=(props)=>{
        return (
            <div>
                {props.sender==="bot" && (
                    <img src="bot.png"  alt="pic" width="50" height="50"/>)}
                {props.message}
                {props.sender==="user" && (
                    <img src="user.png"  alt="pic" width="50" height="50"/>)}
            </div>
        )
    }

    const InputElement=({massage,setMessage})=>{//component-piece of website

        let [textInput,setTextInput]=React.useState('');

        function getTheInput(event){//event is a object the give details about the event and the target gives the elements of it
            setTextInput(event.target.value);
        }

        function sendChatMessages(){
            setMessage([...massage,{
                message:textInput,
                sender:"user",
                key:crypto.randomUUID()
            }])

            setTextInput('');
        }

        return (<div>
                  <input
                      type="text" placeholder="say something"
                      onChange={getTheInput}
                      value={textInput}
                  />
                  <button onClick={sendChatMessages} >Send</button>
                </div>
        );
    }

    const MassageElement=({massage})=>{

        return (
            <div>
                {massage.map(obj => (
                    <ChatMessages
                        key={obj.key}
                        message={obj.message}
                        sender={obj.sender}
                    />
                ))}
            </div>
        );
    }

    const App=()=>{

        const [massage,setMessage]=React.useState([{ //lifting the state up(tree)
            message:"Hello Chat",
            sender:"user",
            key:"k1"
        },{
            message:"Hello Chat-bot!",
            sender:"bot",
            key:"k2"
        },{
            message:"Hello Chat",
            sender:"user",
            key:"k3"
        },{
            message:"Hello Chat-bot!",
            sender:"bot",
            key:"k4"
        }]);

        return (<>
                    <InputElement massage={massage} setMessage={setMessage}/>
                    <MassageElement massage={massage}/>
            </>
        )
    }

    const mainContainer=document.querySelector(".js-container");

    ReactDOM.createRoot(mainContainer).render(<App/>);
</script>
</body>
</html>